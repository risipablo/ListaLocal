

class Datos2 {
    constructor() {
        this.productos = [];
        this.agregarProductos(1,"Excellent","Adulto","1","3757","Gato","Excellent","Forastero");
        this.agregarProductos(154,"Excellent","Adulto","3","10294","Gato","Excellent","Forastero");
        this.agregarProductos(2,"Excellent","Adulto","7.5","22184","Gato","Excellent","Forastero");
        this.agregarProductos(3,"Excellent","Kitten","1","4172","Gato","Excellent","Forastero");
        this.agregarProductos(4,"Excellent","Kitten","7.5","24565","Gato","Excellent","Forastero");
        this.agregarProductos(5,"Excellent","Sterilized","1","4378","Gato","Excellent","Forastero");
        this.agregarProductos(6,"Excellent","Sterilized","7.5","25562","Gato","Excellent","Forastero");
        this.agregarProductos(7,"Excellent","Urinary","1","4378","Gato","Excellent","Forastero");
        this.agregarProductos(8,"Excellent","Urinary","7.5","25562","Gato","Excellent","Forastero");
        this.agregarProductos(9,"Excellent","Puppy Small","3","7164","Perro","Excellent","Forastero");
        this.agregarProductos(10,"Excellent","Puppy Small","15","28086","Perro","Excellent","Forastero");
        this.agregarProductos(11,"Excellent","Puppy Grande","3","6938","Perro","Excellent","Forastero");
        this.agregarProductos(12,"Excellent","Puppy Grande","15","27206","Perro","Excellent","Forastero");
        this.agregarProductos(13,"Excellent","Mini Adulto","3","6553","Perro","Excellent","Forastero");
        this.agregarProductos(14,"Excellent","Mini Adulto","15","25704","Perro","Excellent","Forastero");
        this.agregarProductos(15,"Excellent","Adulto Grande","3","6292","Perro","Excellent","Forastero");
        this.agregarProductos(16,"Excellent","Adulto Grande","15","24672","Perro","Excellent","Forastero");
        this.agregarProductos(183,"Excellent","Adulto Grande","20","29304","Perro","Excellent","Forastero");
        this.agregarProductos(148,"Excellent","Adulto","15","42800","Gato","Excellent","Forastero");
        this.agregarProductos(150,"Excellent","Senior","15","27140","Perro","Excellent","Forastero");
        this.agregarProductos(17,"Agility","Adulto Grande","20","20279","Perro","Excellent","Nutrisur");
        this.agregarProductos(18,"Biopet","Mini Adulto","15","11200","Perro","Biopet","Popy");
        this.agregarProductos(19,"Biopet","Adulto","20","12700","Perro","Biopet","Popy");
        this.agregarProductos(20,"Old Prince","Mini Adulto","7.5","11043","Perro","Old Prince","Don Tomas");
        this.agregarProductos(21,"Old Prince","Mini Adulto","15","20078","Perro","Old Prince","Don Tomas");
        this.agregarProductos(22,"Old Prince","Derma Small/Cachorro","7.5","14963","Perro","Old Prince","Don Tomas");
        this.agregarProductos(23,"Old Prince","Derma Small/Cachorro","15","28501","Perro","Old Prince","Don Tomas");
        this.agregarProductos(25,"Old Prince","Cachorro Small","7.5","11383","Perro","Old Prince","Don Tomas");
        this.agregarProductos(26,"Old Prince","Derma Adulto","7.5","13602","Perro","Old Prince","Don Tomas");
        this.agregarProductos(27,"Old Prince","Derma Adulto","15","25910","Perro","Old Prince","Don Tomas");
        this.agregarProductos(28,"Balanced","Derma Adulto","3","7687","Perro","Balanced","Amadeo");
        this.agregarProductos(29,"Balanced","Derma Adulto","15","26587","Perro","Balanced","Amadeo");
        this.agregarProductos(30,"Sieger","Mini Puppy","1","3515","Perro","Sieger","Nutrisur");
        this.agregarProductos(31,"Sieger","Mini Puppy","3","8124","Perro","Sieger","Nutrisur");
        this.agregarProductos(32,"Sieger","Mini Puppy","12","26510","Perro","Sieger","Nutrisur");
        this.agregarProductos(33,"Sieger","Cachorro","1","3196","Perro","Sieger","Nutrisur");
        this.agregarProductos(34,"Sieger ","Cachorro","3","7740","Perro","Sieger","Nutrisur");
        this.agregarProductos(35,"Sieger","Cachorro","15","30540","Perro","Sieger","Nutrisur");
        this.agregarProductos(36,"Sieger","Senior","3","7518","Perro","Sieger","Nutrisur");
        this.agregarProductos(37,"Sieger","Adulto Grande","3","7371","Perro","Sieger","Nutrisur");
        this.agregarProductos(38,"Sieger","Adulto Grande","15","28009","Perro","Sieger","Nutrisur");
        this.agregarProductos(39,"Sieger","Mini Adulto","1","3515","Perro","Sieger","Nutrisur");
        this.agregarProductos(40,"Sieger ","Mini Adulto","3","7960","Perro","Sieger","Nutrisur");
        this.agregarProductos(155,"Sieger ","Mini Adulto","12","26510","Perro","Sieger","Nutrisur");
        this.agregarProductos(156,"Sieger ","Reduce Calorie","3","7664","Perro","Sieger","Nutrisur");
        this.agregarProductos(73,"Sieger ","Derma","12","27818","Perro","Sieger","Nutrisur");
        this.agregarProductos(76,"Sieger ","Derma","3","8653","Perro","Sieger","Nutrisur");
        this.agregarProductos(79,"Sieger ","Criadores","20","30977","Perro","Sieger","Nutrisur");
        this.agregarProductos(41,"Cat Chow","Adulto ","8","16044","Gato","Cat Chow","Forastero");
        this.agregarProductos(42,"Cat Chow","Adulto ","15","27600","Gato","Cat Chow","Forastero");
        this.agregarProductos(43,"Cat Chow","Kitten ","8","17265","Gato","Cat Chow","Forastero");
        this.agregarProductos(44,"Cat Chow","Kitten ","15","29765","Gato","Cat Chow","Forastero");
        this.agregarProductos(45,"Pro Plan","Adulto Small","7.5","23627","Perro", "Pro Plan","Forastero");
        this.agregarProductos(149,"Pro Plan","Adulto Small","3","11297","Perro", "Pro Plan","Forastero");
        this.agregarProductos(46,"Gati","Adulto ","15","15560","Gato","Gati","Forastero");
        this.agregarProductos(47,"Infinity","Adulto","21","20460","Perro","Infinity","Chubutin");
        this.agregarProductos(48,"Infinity","Mini Adulto ","15","15330","Perro","Infinity","Chubutin");
        this.agregarProductos(49,"Nutricare","Mini Adulto","7.5","6195","Perro","Nutricare","Chubutin");
        this.agregarProductos(50,"Nutricare","Mini Adulto ","20","16985","Perro","Nutricare","Chubutin");
        this.agregarProductos(51,"Nutricare","Adulto Grande","7.5","6195","Perro","Nutricare","Chubutin");
        this.agregarProductos(52,"Nutricare","Adulto Grande ","20","16985","Perro","Nutricare","Chubutin");
        this.agregarProductos(53,"Optimun ","Pouch ","12","4230","Gato/Perro","Optimun","Chubutin");
        this.agregarProductos(54,"Nutricare","Cachorro","15","14085","Perro","Nutricare","Chubutin");
        this.agregarProductos(55,"Piedras Blancas","Adulto","Pack x 4","4000","Gato","-","Popy");
        this.agregarProductos(56,"Wishka","Adulto ","10","16759","Gato","Wishka","Don Tomas");
        this.agregarProductos(57,"Bocato","Adulto","20","9745","Perro","Bocato","Chubutin");
        this.agregarProductos(58,"Bocato","Adulto ","10","7085","Gato","Bocato","Chubutin");
        this.agregarProductos(59,"Optimun","Adulto","1","2400","Gato","Optimun","Chubutin");
        this.agregarProductos(184,"Optimun","Adulto ","10","17420","Gato","Optimun","Chubutin");
        this.agregarProductos(185,"Optimun","Adulto","3","6100","Gato","Optimun","Chubutin");
        this.agregarProductos(186,"Optimun","Mini Adulto ","15","15020","Perro","Optimun","Chubutin");
        this.agregarProductos(187,"Optimun","Mini Adulto","3","4125","Perro","Optimun","Chubutin");
        this.agregarProductos(61,"Pedigree","Mini Adulto","15","16503","Perro","Pedigree","Don Tomas");
        this.agregarProductos(62,"Dog Chow","Adulto Senior","8","10932","Perro","Dog Chow","Forastero");
        this.agregarProductos(63,"Dog Chow","Mini Adulto","21","26252","Perro","Dog Chow","Forastero");
        this.agregarProductos(64,"Dog Chow","Adulto Light","8","11398","Perro","Dog Chow","Forastero");
        this.agregarProductos(65,"Dog Chow","Adulto Light","21","27338","Perro","Dog Chow","Forastero");
        this.agregarProductos(66,"Agility","Adulto Grande","3","4339","Perro", "Agility","Nutrisur");
        this.agregarProductos(67,"Agility","Mini Adulto","3","5017","Perro", "Agility","Nutrisur");
        this.agregarProductos(68,"Agility","Mini Adulto","15","19424","Perro", "Agility","Nutrisur");
        this.agregarProductos(69,"Agility","Adulto Derma","3","5091","Perro", "Agility","Nutrisur");
        this.agregarProductos(70,"Agility","Adulto Derma","15","20510","Perro", "Agility","Nutrisur");
        this.agregarProductos(71,"Agility","Cachorro","3","5014","Perro", "Agility","Nutrisur");
        this.agregarProductos(72,"Agility","Cahorro","20","24105","Perro", "Agility","Nutrisur");
        this.agregarProductos(74,"Agility","Adulto","1.5","4041","Gato", "Agility","Nutrisur");
        this.agregarProductos(75,"Agility","Adulto","10","20566","Gato", "Agility","Nutrisur");
        this.agregarProductos(77,"Agility","Kitten","1.5","4338","Gato", "Agility","Nutrisur");
        this.agregarProductos(78,"Agility","Kitten","10","21753","Gato", "Agility","Nutrisur");
        this.agregarProductos(80,"Agility","Urinary","1.5","4337","Gato", "Agility","Nutrisur");
        this.agregarProductos(81,"Agility","Urinary","10","21753","Gato", "Agility","Nutrisur");
        this.agregarProductos(82,"Maxxium","Adulto","20","27780","Perro","Nutricare","Chubutin");
        this.agregarProductos(83,"Agility","Light","1.5","4337","Gato", "Agility","Nutrisur");
        this.agregarProductos(84,"Agility","Light","10","21753","Gato", "Agility","Nutrisur");
        this.agregarProductos(85,"Agility","Lata Perro","1","1164","Perro", "Agility","Nutrisur");
        this.agregarProductos(172,"Agility","Pack de lata"," 1 (x12) ","15642","Perro/Gato", "Agility","Nutrisur");
        this.agregarProductos(142,"Agility","Lata Gato",1,"1164","Gato", "Agility","Nutrisur");
        this.agregarProductos(86,"Royal Canin","Mini Puppy","1","4300","Perro","Royal Canin","Nutripet");
        this.agregarProductos(87,"Royal Canin","Mini Puppy","3","11583","Perro","Royal Canin","Nutripet");
        this.agregarProductos(88,"Royal Canin","Mini Puppy","7.5","22368","Perro","Royal Canin","Nutripet");
        this.agregarProductos(89,"Royal Canin","Mini Puppy","15","39698","Perro","Royal Canin","Nutripet");
        this.agregarProductos(90,"Royal Canin","Mini Adulto","1","3918","Perro","Royal Canin","Nutripet");
        this.agregarProductos(91,"Royal Canin","Mini Adulto","3","10658","Perro","Royal Canin","Nutripet");
        this.agregarProductos(92,"Royal Canin","Mini Adulto","7.5","22465","Perro","Royal Canin","Nutripet");
        this.agregarProductos(94,"Royal Canin","X-small Adulto","1","4672","Perro","Royal Canin","Nutripet");
        this.agregarProductos(95,"Royal Canin","X-small Junior","1","4167","Perro","Royal Canin","Nutripet");
        this.agregarProductos(96,"Royal Canin","Pocuh Mini Adulto","1","956","Perro","Royal Canin","Nutripet");
        this.agregarProductos(96,"Royal Canin","Pocuh Mini Adulto","X12","6776","Perro","Royal Canin","Nutripet");
        this.agregarProductos(97,"Royal Canin","Kitten","1.5","9345","Gato","Royal Canin","Nutripet");
        this.agregarProductos(98,"Royal Canin","Urinary","1.5","9558","Gato","Royal Canin","Nutripet");
        this.agregarProductos(100,"Royal Canin","Weight Control","1","9284","Gato","Royal Canin","Nutripet");
        this.agregarProductos(101,"Royal Canin","Urinary S/O","1","8685","Gato","Royal Canin","Nutripet");
        this.agregarProductos(102,"Eukanuba","Mini Puppy","1","3463","Perro","Eukanuba","Nutripet");
        this.agregarProductos(103,"Eukanuba","Mini Puppy","3","8541","Perro","Eukanuba","Nutripet");
        this.agregarProductos(104,"Eukanuba","Mini Puppy","15","30575","Perro","Eukanuba","Nutripet");
        this.agregarProductos(105,"Eukanuba","Md/Lg Puppy","1","3194","Perro","Eukanuba","Nutripet");
        this.agregarProductos(106,"Eukanuba","Md/Lg Puppy","15","29064","Perro","Eukanuba","Nutripet");
        this.agregarProductos(107,"Eukanuba","Md/Lg Puppy","3","8401","Perro","Eukanuba","Nutripet");
        this.agregarProductos(108,"Eukanuba","Mini Adulto","1","3194","Perro","Eukanuba","Nutripet");
        this.agregarProductos(109,"Eukanuba","Mini Adulto","3","7278","Perro","Eukanuba","Nutripet");
        this.agregarProductos(110,"Eukanuba","Mini Adulto","15","25320","Perro","Eukanuba","Nutripet");
        this.agregarProductos(111,"Eukanuba","Adulto Md/Lg","3","8401","Perro","Eukanuba","Nutripet");
        this.agregarProductos(112,"Eukanuba","Adulto Mg/lg","15","29064","Perro","Eukanuba","Nutripet");
        this.agregarProductos(113,"Eukanuba","Adulto Senior","3","8421","Perro","Eukanuba","Nutripet");
        this.agregarProductos(114,"Eukanuba","Weight Control","3","9141","Perro","Eukanuba","Nutripet");
        this.agregarProductos(183,"Felix","Pouch","1","506","Gato","Catchow","Forastero");
        this.agregarProductos(115,"Felix","Pouch","15","7594","Gato","Catchow","Forastero");
        this.agregarProductos(116,"Kro Line","Pretal Completo","1.5","2800","Perro","Kro Line","Kro Line");
        this.agregarProductos(117,"Kro Line","Pretal Completo","2","3000","Perro","Kro Line","Kro Line");
        this.agregarProductos(118,"Kro Line","Pretal Completo","2.5","3610","Perro","Kro Line","Kro Line");
        this.agregarProductos(119,"Kro Line","Pretal Completo","3","3810","Perro","Kro Line","Kro Line");
        this.agregarProductos(120,"Kro Line","Correa Sola","1.5","1240","Perro","Kro Line","Kro Line");
        this.agregarProductos(121,"Kro Line","Correa Sola","2","1350","Perro","Kro Line","Kro Line");
        this.agregarProductos(122,"Kro Line","Correa Sola","2.5","1540","Perro","Kro Line","Kro Line");
        this.agregarProductos(123,"Kro Line","Correa Sola","3","1650","Perro","Kro Line","Kro Line");
        this.agregarProductos(124,"Hueso","Corbata","6 cm" ,"225","Perro","Hueso","Hueso");
        this.agregarProductos(125,"Hueso","Corbata","13 cm","538","Perro","Hueso","Hueso");
        this.agregarProductos(126,"Hueso","Hueso Grande","34 cm","2530","Perro","Hueso","Hueso");
        this.agregarProductos(127,"Hueso","Palito Grising","20 cm","192","Perro","Hueso","Hueso");
        this.agregarProductos(128,"Hueso","Orejas","","225","Perro","Hueso","Hueso");
        this.agregarProductos(60,"Pedigree","Lata","1","781","Perro","Pedigree","Don Tomas");
        this.agregarProductos(129,"Pedigree","Lata","12","9372","Perro","Pedigree","Don Tomas");
        this.agregarProductos(130,"Pedigree","Pouch","1","243","Perro","Pedigree","Don Tomas");
        this.agregarProductos(183,"Pedigree","Pouch","12","2916","Perro","Pedigree","Don Tomas");
        this.agregarProductos(131,"Osspret Pipetas","Adulto","11-20","858","Perro","Pipetas","Amadeo");
        this.agregarProductos(132,"Osspret Pipetas","Adulto","2-10","1312","Perro","Pipetas","Amadeo");
        this.agregarProductos(133,"Osspret Pipetas","Adulto","21-40","1730","Perro","Pipetas","Amadeo");
        this.agregarProductos(134,"Osspret Pipetas","Adulto","+ 40","1144","Perro","Pipetas","Amadeo");
        this.agregarProductos(135,"Osspret Pipetas","Adulto","+ 4","1353","Gato","Pipetas","Amadeo");
        this.agregarProductos(136,"Osspret Shampoo","Pelo Blanco","1","1508","Perro","Shampoo","Amadeo");
        this.agregarProductos(137,"Osspret Shampoo","Pelo Negro","1","1508","Perro","Shampoo","Amadeo");
        this.agregarProductos(138,"Osspret Shampoo","Dermatitis","1","1508","Perro","Shampoo","Amadeo");
        this.agregarProductos(139,"Osspret Shampoo","Algas","1","1508","Perro","Shampoo","Amadeo");
        this.agregarProductos(140,"Osspret Shampoo","Duo","1","1600","Perro","Shampoo","Amadeo");
        this.agregarProductos(141,"Osspret Shampoo","Extra Brillo","1","1870","Perro","Shampoo","Amadeo");
        this.agregarProductos(143,"Kro Line","Pechera Pitbul","5 cm","6800","Perro","Kro Line","Kro Line");
        this.agregarProductos(144,"Stone Cat","Adulto","1","1899","Gato","Piedras","Can Cid");
        this.agregarProductos(145,"Pellcats","Adulto","1","966","Gato","Piedras","Can Cid");
        this.agregarProductos(146,"Bandejas Sanitarias medianas","Adulto","1","1337","Gato","Piedras","Can Cid");
        this.agregarProductos(147,"Golocan","Adulto","1","630","Perro","Bocados","Can Cid");
        this.agregarProductos(151,"Nutricare","Adulto","7.5","11085","Gato","Nutricare","Chubutin");
        this.agregarProductos(152,"Smarty","Adulto","15","6900","Perro","Keiko","Popy");
        this.agregarProductos(152,"Keiko","Adulto","21","10900","Perro","Keiko","Popy");
        this.agregarProductos(152,"Keiko","Cachorro","15","11200","Perro","Keiko","Popy");
        this.agregarProductos(153,"Arroz","Adulto","15","13000","Perro","Arroz","Popy");
        this.agregarProductos(157,"Balanced","Mini Senior ","3","6805","Perro","Balanced","Amadeo");
        this.agregarProductos(158,"Balanced","Mini Senior","7.5","15555","Perro","Balanced","Amadeo");
        this.agregarProductos(159,"Balanced","Grande Senior","3","6805","Perro","Balanced","Amadeo");
        this.agregarProductos(160,"Balanced","Grande Senior","15","25420","Perro","Balanced","Amadeo");
        this.agregarProductos(161,"Kro Line","Correa Ancha","4","3600","Perro","Kro Line","Kro Line");
        this.agregarProductos(162,"Kro Line","Cinturon de seguridad","3","2400","Perro","Kro Line","Kro Line");
        this.agregarProductos(163,"Kro Line","Pretal Solo","1.5","1605","Perro","Kro Line","Kro Line");
        this.agregarProductos(164,"Kro Line","Pretal Solo","2","1720","Perro","Kro Line","Kro Line");
        this.agregarProductos(165,"Kro Line","Pretal Solo","2.5","2005","Perro","Kro Line","Kro Line");
        this.agregarProductos(166,"Kro Line","Pretal Solo","3","2300","Perro","Kro Line","Kro Line");
        this.agregarProductos(167,"Kro Line","Collar Pitbull","4","2560","Perro","Kro Line","Kro Line");
        this.agregarProductos(168,"Kro Line","Collar Pitbull","5","2900","Perro","Kro Line","Kro Line");
        this.agregarProductos(169,"Stone Cat","Adulto","5","9498","Gato","Piedras","Can Cid");
        this.agregarProductos(170,"Pellcats","Adulto","5","4830","Gato","Piedras","Can Cid");
        this.agregarProductos(171,"Golocan","Adulto","20","12698","Perro","Bocados","Can Cid");
        this.agregarProductos(93,"Piedras Blancas","Adulto","2","4400","Gato","-","Popy")
        this.agregarProductos(173,"Sieger Katze","Kitten","1","4564","Gato","Sieger","Nutrisur");
        this.agregarProductos(174,"Sieger Katze","Kitten","7.5","23886","Gato","Sieger","Nutrisur");
        this.agregarProductos(175,"Sieger Katze","Adulto","1","4347","Gato","Sieger","Nutrisur");
        this.agregarProductos(176,"Sieger Katze","Adulto","7.5","21796","Gato","Sieger","Nutrisur");
        this.agregarProductos(177,"Sieger Katze","Urinary","1","4564","Gato","Sieger","Nutrisur");
        this.agregarProductos(178,"Sieger Katze","Urinary","7.5","22886","Gato","Sieger","Nutrisur");
        this.agregarProductos(179,"Sieger Katze","Senior","1","4564","Gato","Sieger","Nutrisur");
        this.agregarProductos(180,"Sieger Katze","Senior","7.5","22886","Gato","Sieger","Nutrisur");
        this.agregarProductos(181,"Sieger Katze","Light","1","4564","Gato","Sieger","Nutrisur");
        this.agregarProductos(182,"Sieger Katze","Light","7.5","22886","Gato","Sieger","Nutrisur");
        this.agregarProductos(183,"Sieger Katze","Stress Control","1","4564","Gato","Sieger","Nutrisur");
        this.agregarProductos(184,"Sieger Katze","Stress Control","7.5","22886","Gato","Sieger","Nutrisur");
        this.agregarProductos(185,"Comedero Doble","Adulto","1","3446","Perro","Accesorio","Can Cid");
        this.agregarProductos(186,"Comedero Plastico Chico","Adulto","1","214","Perro","Accesorio","Can Cid");
        this.agregarProductos(187,"Comedero Chico Inoxidable","Adulto","1","2294","Perro","Accesorio","Can Cid");
        this.agregarProductos(188,"Comedero Doble Europe","Adulto","1","764","Perro","Accesorio","Can Cid");
        this.agregarProductos(189,"Comedero Huella","Adulto","1","630","Perro","Accesorio","Can Cid");
        this.agregarProductos(190,"Comedero Grande Inoxidable","Adulto","1","8668","Perro","Accesorio","Can Cid");
        this.agregarProductos(191,"Comedero Plastico Grande","Adulto","1","1005","Perro","Accesorio","Can Cid");
    }

    agregarProductos(id,nombre,tamaño,kg,precio,mascota,marca,proveedor){
        const producto = new Producto (id,nombre,tamaño,kg,precio,mascota,marca,proveedor); /* este const se vincula con la class Producto */
        this.productos.push(producto); 
    }

    traerRegistros() {
        return this.productos;
    }

    registroPorId(id){
        return this.productos.find((producto) => producto.id === id);
    }

    filtrarpormarca(marca){
        return this.productos.filter((producto) => producto.marca === marca)
    }

    filtarporproveedor(proveedor){
        return this.productos.filter((producto) => producto.proveedor === proveedor)
    }

    BuscadorporNombres(palabra) {
        const palabras = palabra.toLowerCase().split(" ");
        return this.productos.filter((producto) => {
            return palabras.every((p) =>
                producto.nombre.toLowerCase().includes (p) || 
                producto.tamaño.toLowerCase().includes (p) || 
                producto.mascota.toLowerCase().includes(p) ||
                producto.proveedor.toLowerCase().includes(p) ||
                producto.kg.toString().toLowerCase(). includes(p)
            );
        });
    }
}


class Producto{
    constructor(id,nombre,tamaño,kg,precio,mascota,marca,proveedor){
        this.id = id;
        this.nombre = nombre;
        this.tamaño = tamaño;
        this.kg = kg;
        this.precio = precio;
        this.mascota = mascota;
        this.marca = marca;
        this.proveedor = proveedor
    }
}

/* configuración de carro de compras */

const divCarrito = document.querySelector("#carrito");
const spanCantidadProductos = document.querySelector("#cantidadProductos");
const spanTotalCarrito = document.querySelector("#totalCarrito");



// Seccion de carrito

class Carrito {
    constructor(){
        const carritoLocal = JSON.parse(localStorage.getItem("carrito"))

        this.carrito = carritoLocal || [];
        this.total = 0;
        this.totalProductos = 0;
        this.listar();
    }

    estaenelCarrito({ id }) {
        return this.carrito.find((producto) => producto.id === id);
    }

    agregar(producto){
        const productoencarrito = this.estaenelCarrito(producto);
        if (productoencarrito) {
            productoencarrito.cantidad ++;
        } else {
            this.carrito.push({...producto,cantidad:1});
        }

        localStorage.setItem("carrito", JSON.stringify(this.carrito));

        this.listar();
    }

    quitar(id){
        const indice = this.carrito.findIndex((producto) => producto.id === id);
        if (this.carrito[indice].cantidad > 1 ) {
            this.carrito[indice].cantidad--;
        } else {
            this.carrito.splice(indice, 1);
        }
        localStorage.setItem("carrito" , JSON.stringify(this.carrito));
        this.listar();
    }

    vaciar() {
        this.carrito = [];
        localStorage.removeItem("carrito");
        this.listar();
    }

    resetearcarrito(){
        
    }

    listar (){
        this.total = 0;
        this.totalProductos = 0;
        divCarrito.innerHTML= "";

        for(const producto of this.carrito){
            divCarrito.innerHTML += `
            <div class="productoCarrito">

            <h4 class="producto"> ${producto.nombre} </h4>
            <p class="descripcion"> ${producto.tamaño}</p>
            
            <p class="descripcion"> ${producto.kg}</p>
            <p class="precio"> Precio: $${producto.precio}</p>
            <div class="items">
            <p class="cantidad">Cantidad: ${producto.cantidad}</p>
            <a href="#" data-id="${producto.id}" class="btnQuitar"><i class="fa-solid fa-trash-can">  </i>  </a>
            </div>
            </div>
            `;

            
            this.total += producto.precio * producto.cantidad;
            this.totalProductos += producto.cantidad;
        }

        if (this.totalProductos > 0) {
            botonComprar.classList.remove("oculto"); 
        } else {
            botonComprar.classList.add("oculto")
        }
        
        const botonesQuitar = document.querySelectorAll(".btnQuitar");
        for (const boton of botonesQuitar) {
            boton.onclick = (event) => {
            event.preventDefault();
            this.quitar(Number(boton.dataset.id));
            };
        }

        
        spanCantidadProductos.innerText = this.totalProductos;
        spanTotalCarrito.innerText = this.total;
        
    }
}




const bd = new Datos2 (); 


/* creacion de tablas de precios */

const divlista = document.querySelector (".lista");
const botonComprar = document.querySelector("#botonComprar");

cargarProductos(bd.productos);

function cargarProductos(productos){
    divlista.innerHTML = `
        <table>
        <tr class="nombres">
            <th> ID </th>
            <th> Marca </th>
            <th> Edad </th>
            <th> Tipo </th>
            <th> Unidad </th>
            <th> Precio </th>
            <th>  </th>
        </tr>
        </table>
    `;

    const tabla = divlista.querySelector("table");

    for (const producto of productos) {
        tabla.innerHTML += `
        <tr>
            <td>${producto.id} </td>
            <td>${producto.nombre} </td>
            <td>${producto.tamaño}</td>
            <td>${producto.mascota}</td>
            <td>${producto.kg}</td>
            <td class="precio">$ ${producto.precio}</td>
            <td> <a href="#" class="btnAgregar" data-id="${producto.id}"> Agregar </a></td> 
        </tr>
        `;
    }

        const botonesAgregar = document.querySelectorAll(".btnAgregar");
        for (const boton of botonesAgregar) {
        boton.addEventListener("click", (event) => {
            event.preventDefault();
            const id = Number(boton.dataset.id);
            const producto = bd.registroPorId(id);
            carrito.agregar(producto);
        });
    }

    botonComprar.addEventListener("click", (event) => {
        event.preventDefault(); 
        carrito.vaciar();
    
    });
}





/* buscador de productos */

const Buscador = document.querySelector (".buscar_texto");

Buscador.addEventListener("keyup", (event) => {
    event.preventDefault();
    const palabra = Buscador.value.toLowerCase();
    const productos = bd.BuscadorporNombres(palabra);
    cargarProductos(productos);
})




// filtros 

const abrir = document.querySelector('.filtro');
const cerrar = document.querySelector('.cerrar');
const contenido = document.querySelector('.contenido');

abrir.addEventListener("click", (event) =>{
    contenido.classList.add ('show');
});

cerrar.addEventListener("click", (event) => {
    contenido.classList.remove ('show');
});


const provedor = document.querySelectorAll ('.btnprovedor');
const botonMarca = document.querySelectorAll (".btnMarca");
const TodosProductos = document.getElementById("Todos");

TodosProductos.addEventListener("click", (event) =>{
    event.preventDefault;
    quitarClase();
    TodosProductos.classList.add ("seleccionado");
    cargarProductos (bd.productos);
})

function quitarClase(){
    const botonSeleccionado = document.querySelector (".seleccionado");
    if (botonSeleccionado) {
        botonSeleccionado.classList.remove (".seleccionado");
    }
}


botonMarca.forEach((boton) => {
    boton.addEventListener ("click",(event) =>{
        event.preventDefault ();
        boton.classList.add ("seleccionado");
        const marcaSeleccionada = boton.innerText;
        const productosPorMarca = bd.filtrarpormarca(marcaSeleccionada);
        cargarProductos(productosPorMarca);
    })
})

provedor.forEach((boton) =>{
    boton.addEventListener ("click", (event) => {
        event.preventDefault ();
        boton.classList.add ("seleccionado");
        const proveedor = boton.innerText;
        const proveedores = bd.filtarporproveedor(proveedor);
        cargarProductos(proveedores)
    })
})

// Boton carrito


const botonCarrito = document.querySelector("section h3");
const closebtn = document.querySelector (".close");

botonCarrito.addEventListener("click", (event) => {
    document.querySelector("section").classList.toggle("ocultar");
});

closebtn.addEventListener("click" , (event) => {
    document.querySelector("section").classList.toggle ("ocultar");
});


// Recordatorio 

document.addEventListener("DOMContentLoaded", function() {
    const fechaActual = new Date();

    const fechaEmision = fechaActual.getFullYear()

    const año = 2023

    if(fechaEmision === año) {
        const recordatorio = document.getElementById("recordatorio");
        recordatorio.style.display = "block";
    
        // Ocultar el recordatorio después de 5 segundos
        setTimeout(function () {
        recordatorio.style.display = "none";
        }, 7000);
    }
})


const carrito = new Carrito();


